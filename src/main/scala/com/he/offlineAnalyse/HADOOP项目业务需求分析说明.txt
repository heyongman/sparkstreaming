

- 新增用户和总用户分析
    新用户数据和总用户数据
        platform、date、browser
    - new_install_user计算规则：计算launch事件中，uuid的唯一个数。
    - total_user计算规则：同一个维度，前一天的总用户+当天新增用户。

- 活跃用户分析
    active_user计算规则：当天所有数据中，uuid的去重个数。

=========================================================
- 活跃会员分析
    - 活跃会员的统计和活跃用户统计类似，区别只是在于从不同的角度来进行分析访问网站的用户数量。
    - 活跃用户统计是根据我们在cookie中保存的uuid来进行访问网站用户数量的一个统计，而活跃会员统计是通过统计登录网站的用户数量(去重)。
    - 一般而言，如果活跃用户的数量远远超过活跃会员数量，那么表示本网站对会员的吸引能力不够。
    - 活跃会员(active_member)计算规则：
        - 计算当天(确定时间维度信息)的pageview事件的数据中memberid的去重个数。
        - 这里只所以选择pageview事件，是可能会存在一种可能：某个会员在当天没有进行任何操作，但是他订单支付成功的操作在今天在被触发，这样在所有数据中就会出现一个java_server平台产生的订单支付成功事件，包含会员id。

- 新增会员和总会员分析
    - 新增会员统计类似新增用户统计，也是统计新增u_mid的个数，在新增用户统计中，我们是统计launch事件中，uuid的唯一个数，那么在新增会员中，我们是统计所有事件中的第一次访问网站的会员id的去重个数(第一次访问网站定义为: 在日志收集模块上线后，第一次访问网站的均作为新会员)。
    - 新会员(new_member)计算规则：计算当天(由维度信息确定)的所有数据中的member id，要求member id以前没有访问过网站(在日志收集模块上线后没法访问过)，统计这部分的member id格式作为新会员的数量值。
    - 所有要求我们保存member id到某个数据库中，在这里有两种比较好的方法，第一种将会员信息保存到hbase中，以会员id作为rowkey，这样方式方便获取。第二种将会员信息保存到mysql中，以会员id作为主键，这种方式方便存储。这里采用第二种方式。
    - 总会员(total_member)计算规则：前一天的总会员+今天的新增会员作为今天的总会员数。如果是计算月维度的总会员，那么就是拿上个月这个维度的总会员 + 这个月维度下的新增会员作为这个月维度下的总会员。实现方式类似total_users的计算。
=========================================================

- 会话分析
    - 会话分析主要同时计算会话个数和会话长度，主要应用在用户基本信息分析模块和浏览器信息分析模块这两部分。会话个数就是计算u_sd的唯一个数，长度就是每个会话的长度总和。
    - 会话个数指的是计算所有u_sd的个数，会话长度就是计算每个会话的长度，然后计算这些长度的一个总值。(注意：处理的数据为所有事件产生的数据)

- Hourly分析
     - Hourly分析指的是按照小时分析数据，在本次项目中，只分析活跃用户、会话个数以及会话长度这三个指标的数据。
     -  hourly分析分为hourly active user分析、hourly sessions分析以及hourly sessions length分析，分别计算各个小时的活跃用户、会话个数以及会话长度来进行展示操作。

=========================================================

- 浏览器PV分析
    - 在浏览器信息分析模块中除了用户、会员和会话的分析外，还有pv的分析，pv的计算可以代表网站的流量值，也能够表示网站对用户的吸引程度，如果用户平均pv比较高，那么表示网站对用户的引起程度比较高；如果是值比较低，那么表示网站对用户的吸引程度比较低。这个时候，就可以通过跳出率等其他统计指标来找出网站的问题所在。
    - pv的计算其实就是计算访问url的次数，不涉及的去重，也就是说一个用户访问一个url多少次就算多少pv值。也就是说最终结果是一个pageview事件产生一个pv值，不涉及到任何去重操作。
  
- 地域信息分析
    - 地域维度信息(不考虑平台platform和日期date)，我们需要统计三个层面的数据，即：国家级别、省份级别、城市级别。也就是说需要分别统计这三个维度的活跃用户、总会话以及跳出会话个数。
    - 日期维度只按天计算数据，不进行按月和按周计算。
    - 平台维度计算一个all维度和一个具体的平台维度。
    - 需要原始数据：国家、省份、城市、uuid、serverTime、platform这六个维度的字段信息(或者加一个ip地址)，所以在当前只有pc端数据和后台服务端数据的情况下，只需要对pageview事件的数据进行统计计算就可以了。
    - 在维度确定的情况下，活跃用户统计就是统计uuid(用户唯一标识符)的去重个数；总会话个数就是统计u_sd(会话id)的去重个数；跳出会话个数就是统计只访问一个pv的会话总个数，而且pv的计算是统计访问次数来进行判断的，也就是说pv不去重。也就是说最终只需要uuid和u_sd就可以进行判断操作了。

- 外链信息分析
    - 和地域信息分析一样，在外链分析系统中，我们也只是统计活跃用户、总会话以及跳出会话这三个指标的数据。
    - 外链维度信息(不考虑平台platform和日期date)，我们需要统计两个层面的数据，即：all、具体外链。也就是说需要分别统计这两个维度的活跃用户、总会话以及跳出会话个数。同以前的维度信息不一样，在这里外链维度采用完全确定的模式，也就是说在运行过程中，代码中不会涉及到外链信息的插入。
    - 需要原始数据：referrer url、uuid、u_sd、serverTime、platform这五个维度的字段信息，所以在当前只有pc端数据和后台服务端数据的情况下，只需要对pageview事件的数据进行统计计算就可以了。
=========================================================


- 事件分析
    - 事件分析我们主要只是分析事件的触发次数，通过查看事件的触发次数我们可以得到事件转换率或者用户会此类事件的兴趣所在之处以及不喜之处。
    - 计算event事件中，计算category和action分组后的记录个数，不涉及到任何的去重操作。
    - 步骤：
        1. hive自定义函数定义
        2. hive中创建hbase对应的外部表
        3. hive脚步编写
        4. sqoop脚步编写
        5. 测试

=========================================================

- 订单分析
    - 订单分析分别分析订单的数量和订单的金额，以及将订单分为总订单、支付成功订单以及退款订单三种类型的数据，通过这六个分析指标的数据我们可以指定网站的订单情况。
    - 采用每个统计指标写一个hql语句+sqoop语句的方法进行数据的插入操作
    - 步骤：
        1. hive中创建hbase对应的外部表
        2. 订单数量&订单金额的hive&sqoop分析
			a. 实现自定义udf&自定义函数创建
			b. hive+sqoop脚本
        3. 成功支付订单数量&金额&总金额的hive&sqoop分析
			a. 订单数据保存mysql
			b. 实现自定义udf&自定义函数创建
			c. hive+sqoop脚本
        4. 退款订单数量&金额&总金额的hive&sqoop分析
        5. shell脚本编写以及测试（作业）
